%NOIP2013-S D2T2
%input

int: n;
array[1..n] of int: h;
%æ ‹æ ‹çš„èŠ±çš„é«˜åº¦å¯ä»¥çœ‹æˆä¸€åˆ—æ•´æ•°h1, h2, â€¦ , hnã€‚

%description

var 1..n: m;
array[1..n] of var int: g;
%å‰©ä¸‹çš„èŠ±çš„é«˜åº¦ä¾æ¬¡ä¸ºg1, g2, â€¦ , gm
array[1..n] of var 1..n: chosen;
constraint forall(i in 1..m-1)(chosen[i]<chosen[i+1]);
constraint forall(i in 1..m)(g[i]=h[chosen[i]]);

%å¸Œæœ›ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ»¡è¶³
constraint forall(i in 1..m where i mod 2==0)(if i-1>0 then g[i]>g[i-1] else true endif 
/\ if i+1<=m then g[i]>g[i+1] else true endif) \/ 
%æ¡ä»¶ Aï¼šå¯¹äºæ‰€æœ‰çš„ğ‘–ï¼Œg_2i > g_2iâˆ’1ï¼Œä¸”g_2i > g_2i+1ï¼›
forall(i in 1..m where i mod 2==0)(if i-1>0 then g[i]<g[i-1] else true endif 
/\ if i+1<=m then g[i]<g[i+1] else true endif);
%æ¡ä»¶ Bï¼šå¯¹äºæ‰€æœ‰çš„ğ‘–ï¼Œg_2i < g_2iâˆ’1ï¼Œä¸”g_2i < g_2i+1ï¼›

%solve

solve maximize m;
%æ ‹æ ‹æœ€å¤šèƒ½å°†å¤šå°‘æ ªèŠ±ç•™åœ¨åŸåœ°ã€‚

%output

output[show(m)];


